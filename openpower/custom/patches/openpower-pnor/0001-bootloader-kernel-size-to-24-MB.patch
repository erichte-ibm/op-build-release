From 221238a96dfc918c8609f687f2f0079cfab7d5fa Mon Sep 17 00:00:00 2001
From: jim <jim.yuan@supermicro.com>
Date: Fri, 2 Nov 2018 11:23:42 -0700
Subject: [PATCH] bootloader kernel size to 24 MB.

Signed-off-by: jim <jim.yuan@supermicro.com>
[arbab: Regenerate patch against newer openpower-pnor]
Signed-off-by: Reza Arbab <arbab@linux.ibm.com>
---
 p9Layouts/defaultPnorLayout_64.xml | 38 +++++++++++++++---------------
 1 file changed, 19 insertions(+), 19 deletions(-)

diff --git a/p9Layouts/defaultPnorLayout_64.xml b/p9Layouts/defaultPnorLayout_64.xml
index e03d9213f799..aec8c1c4d4c1 100644
--- a/p9Layouts/defaultPnorLayout_64.xml
+++ b/p9Layouts/defaultPnorLayout_64.xml
@@ -223,10 +223,10 @@ Layout Description
         <readOnly/>
     </section>
     <section>
-        <description>Bootloader Kernel (16.67MiB)</description>
+        <description>Bootloader Kernel (24MiB)</description>
         <eyeCatch>BOOTKERNEL</eyeCatch>
         <physicalOffset>0x21C1000</physicalOffset>
-        <physicalRegionSize>0x12C0000</physicalRegionSize>
+        <physicalRegionSize>0x1800000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
         <readOnly/>
@@ -234,7 +234,7 @@ Layout Description
     <section>
         <description>OCC Lid (1.125MiB)</description>
         <eyeCatch>OCC</eyeCatch>
-        <physicalOffset>0x3481000</physicalOffset>
+        <physicalOffset>0x39C1000</physicalOffset>
         <physicalRegionSize>0x120000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -244,7 +244,7 @@ Layout Description
     <section>
         <description>Checkstop FIR data (12KiB)</description>
         <eyeCatch>FIRDATA</eyeCatch>
-        <physicalOffset>0x35E1000</physicalOffset>
+        <physicalOffset>0x3AE1000</physicalOffset>
         <physicalRegionSize>0x3000</physicalRegionSize>
         <side>A</side>
         <ecc/>
@@ -254,7 +254,7 @@ Layout Description
     <section>
         <description>CAPP Lid (144KiB)</description>
         <eyeCatch>CAPP</eyeCatch>
-        <physicalOffset>0x35E4000</physicalOffset>
+        <physicalOffset>0x3AE4000</physicalOffset>
         <physicalRegionSize>0x24000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -264,7 +264,7 @@ Layout Description
     <section>
         <description>BMC Inventory (36KiB)</description>
         <eyeCatch>BMC_INV</eyeCatch>
-        <physicalOffset>0x3608000</physicalOffset>
+        <physicalOffset>0x3B08000</physicalOffset>
         <physicalRegionSize>0x9000</physicalRegionSize>
         <side>sideless</side>
         <reprovision/>
@@ -272,7 +272,7 @@ Layout Description
     <section>
         <description>Hostboot Bootloader (28KiB)</description>
         <eyeCatch>HBBL</eyeCatch>
-        <physicalOffset>0x3611000</physicalOffset>
+        <physicalOffset>0x3B11000</physicalOffset>
         <!-- Physical Size includes Header rounded to ECC valid size -->
         <!-- Max size of actual HBBL content is 20K and 22.5K with ECC -->
         <physicalRegionSize>0x7000</physicalRegionSize>
@@ -284,7 +284,7 @@ Layout Description
     <section>
         <description>Temporary Attribute Override (32KiB)</description>
         <eyeCatch>ATTR_TMP</eyeCatch>
-        <physicalOffset>0x3618000</physicalOffset>
+        <physicalOffset>0x3B18000</physicalOffset>
         <physicalRegionSize>0x8000</physicalRegionSize>
         <side>A</side>
         <reprovision/>
@@ -292,7 +292,7 @@ Layout Description
     <section>
         <description>Permanent Attribute Override (32KiB)</description>
         <eyeCatch>ATTR_PERM</eyeCatch>
-        <physicalOffset>0x3620000</physicalOffset>
+        <physicalOffset>0x3B20000</physicalOffset>
         <physicalRegionSize>0x8000</physicalRegionSize>
         <side>A</side>
         <ecc/>
@@ -302,7 +302,7 @@ Layout Description
     <section>
         <description>PNOR Version (8KiB)</description>
         <eyeCatch>VERSION</eyeCatch>
-        <physicalOffset>0x3628000</physicalOffset>
+        <physicalOffset>0x3B28000</physicalOffset>
         <physicalRegionSize>0x2000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -311,7 +311,7 @@ Layout Description
     <section>
         <description>IMA Catalog (256KiB)</description>
         <eyeCatch>IMA_CATALOG</eyeCatch>
-        <physicalOffset>0x362A000</physicalOffset>
+        <physicalOffset>0x3B2A000</physicalOffset>
         <physicalRegionSize>0x40000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -321,7 +321,7 @@ Layout Description
     <section>
         <description>Ref Image Ring Overrides (128KiB)</description>
         <eyeCatch>RINGOVD</eyeCatch>
-        <physicalOffset>0x366A000</physicalOffset>
+        <physicalOffset>0x3B6A000</physicalOffset>
         <physicalRegionSize>0x20000</physicalRegionSize>
         <side>A</side>
     </section>
@@ -330,7 +330,7 @@ Layout Description
         <!-- We need 266KB per module sort, going to support
              10 sorts by default, plus ECC  -->
         <eyeCatch>WOFDATA</eyeCatch>
-        <physicalOffset>0x368A000</physicalOffset>
+        <physicalOffset>0x3B8A000</physicalOffset>
         <physicalRegionSize>0x300000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -340,7 +340,7 @@ Layout Description
     <section>
         <description>Hostboot deconfig area (20KiB)</description>
         <eyeCatch>HB_VOLATILE</eyeCatch>
-        <physicalOffset>0x398A000</physicalOffset>
+        <physicalOffset>0x3E8A000</physicalOffset>
         <physicalRegionSize>0x5000</physicalRegionSize>
         <side>A</side>
         <reprovision/>
@@ -351,7 +351,7 @@ Layout Description
     <section>
         <description>Memory config data (56KiB)</description>
         <eyeCatch>MEMD</eyeCatch>
-        <physicalOffset>0x398F000</physicalOffset>
+        <physicalOffset>0x3E8F000</physicalOffset>
         <physicalRegionSize>0xE000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -361,7 +361,7 @@ Layout Description
     <section>
         <description>SecureBoot Key Transition Partition (16KiB)</description>
         <eyeCatch>SBKT</eyeCatch>
-        <physicalOffset>0x399D000</physicalOffset>
+        <physicalOffset>0x3E9D000</physicalOffset>
         <physicalRegionSize>0x4000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -371,7 +371,7 @@ Layout Description
     <section>
         <description>HDAT binary data (32KiB)</description>
         <eyeCatch>HDAT</eyeCatch>
-        <physicalOffset>0x39A1000</physicalOffset>
+        <physicalOffset>0x3EA1000</physicalOffset>
         <physicalRegionSize>0x8000</physicalRegionSize>
         <side>sideless</side>
         <sha512Version/>
@@ -381,7 +381,7 @@ Layout Description
     <section>
         <description>Ultravisor binary image (1MiB)</description>
         <eyeCatch>UVISOR</eyeCatch>
-        <physicalOffset>0x39A9000</physicalOffset>
+        <physicalOffset>0x3EA9000</physicalOffset>
         <physicalRegionSize>0x100000</physicalRegionSize>
         <side>sideless</side>
         <sha512Version/>
@@ -390,7 +390,7 @@ Layout Description
     <section>
         <description>Hostboot Runtime Proxy (32KiB)</description>
         <eyeCatch>HBRT_PROXY</eyeCatch>
-        <physicalOffset>0x3AA9000</physicalOffset>
+        <physicalOffset>0x3FA9000</physicalOffset>
         <physicalRegionSize>0x8000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
-- 
2.31.1

